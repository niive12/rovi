\section{Move Into Positions}

The box is misplaced in the workcell.
In order to move it in the code, xml file must be modified, changing the pallet to be moveable.
Because a function for moving the pallet in the lua script was not found, the pallet was moved in the xml file.

The changes is seen in figure \ref{fig:commit_xml}.

To move it in the y-direction of the original rotation matrix is found.
This is multiplied with the desired offset of $11 cm$.

The initial box transform is 
\( 
\left[
 \begin{array}{ccc|c}
  1 & 0 & 0 & 0\\
  0 & 1 & 0 & 0\\
  0 & 0 & 1 & 0\\ \hline
  0 & 0 & 0 & 1\\
 \end{array}
\right]
\), so the final box transform becomes: 
\begin{equation}
\left[
 \begin{array}{ccc|c}
  1 & 0 & 0 & 0\\
  0 & 1 & 0 & 0.11\\
  0 & 0 & 1 & 0\\ \hline
  0 & 0 & 0 & 1\\
 \end{array}
\right]
\end{equation}


\begin{figure}[h]
 \centering
\begin{minipage}{0.75\textwidth}
\begin{lstlisting}[backgroundcolor=\color{commit_remove},language=xml]
 <Frame name="Pallet" refframe="WORLD">
     <RPY> 0 0 0 </RPY> <Pos> 0 0 0 </Pos>
\end{lstlisting}
~\\[-1.2cm]
\begin{lstlisting}[backgroundcolor=\color{commit_add},language=xml]
 <Frame name="Pallet" refframe="WORLD" type="Movable"> 
     <RPY> 0 0 0 </RPY> <Pos> 0 0.11 0 </Pos>
\end{lstlisting}
\end{minipage}
\caption{Changes to the XML file. }
\label{fig:commit_xml}
\end{figure}

T1 is given as:
\[
 \left[
  \begin{array}{*{3}{D{.}{.}{3}}|D{.}{.}{3}}
   0.707 & -0.000 & -0.707 & -0.975    \\
   0.000 & -1.000 &  0.000 & -0.450    \\ 
  -0.707 & -0.000 & -0.707 & -0.032    \\ \hline
   0     &  0     &  0     &  1        \\
  \end{array}
 \right]
\]
The tool is moved to the $Q(0.476,-0.440,0.620,-0.182,2.047,-1.574)$.
The transform of robot base to tool is calculated to be:
\[
 \left[
  \begin{array}{*{3}{D{.}{.}{3}}|D{.}{.}{3}}
   0.706 & -0.000 & -0.708 & -0.975 \\
   0.001 & -1.000 &  0.002 & -0.450 \\ 
  -0.708 & -0.002 & -0.706 & -0.030 \\ \hline
   0     &  0     &  0     &  1     \\
  \end{array}
 \right]
\]

As the difference is at most 2 mm, they are considered to be practically the same position.